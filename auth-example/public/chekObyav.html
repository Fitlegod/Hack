<!DOCTYPE html>
z<html lang="ru">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="./style/main.css">
  <title>Проверка</title>
</head>
<body>

<div class="window-platform">
  <aside class="side-menu">
    <a href="#" class="side-menu__logo logo">DOMLY</a>
    <div class="side-menu__body">
      <nav class="side-menu__nawbar">
        <ul class="side-menu__list">
          <li class="side-menu__item">
            <a href="personal-account.html" class="side-menu__link">Поиск недвижимости</a>
          </li>
          <li class="side-menu__item">
            <a href="#" class="side-menu__link">Избранное</a>
          </li>
          <li class="side-menu__item">
            <a href="#" class="side-menu__link">Недавно просмотренное</a>
          </li>
          <li class="side-menu__item">
            <a href="#" class="side-menu__link">Сравнить</a>
          </li>
          <li class="side-menu__item">
            <a href="./chekObyav.html" class="side-menu__link is-active">Проверить объект</a>
          </li>
          <li class="side-menu__item">
            <a href="./interact.html" class="side-menu__link">Интерактивная карта</a>
          </li>
          <li class="side-menu__item">
            <a href="#" class="side-menu__link">Консультация специалиста</a>
          </li>
          <li class="side-menu__item">
            <a href="#" class="side-menu__link tg-bot">Telegram-bot</a>
          </li>
        </ul>
      </nav>
      <footer class="side-menu__footer">
        <p class="side-menu__footer-configuration">
          @anyway 2025
        </p>
      </footer>
    </div>
  </aside>
  <header class="header">
    <div class="header__container container">
      <div class="header__wrapper">
        <a href="#" class="header__swiper">Свайпер</a>
        <div class="header__active">
          <div class="header__active-user active-user">
            <button class="active-user__button">
              <svg width="30" height="30" viewBox="0 0 74 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M62.7549 31.2964V28.6189C62.7549 13.9177 51.2724 2 37.1083 2C22.944 2 11.4615 13.9177 11.4615 28.6189V31.2964C11.4615 34.5098 10.5452 37.6508 8.82786 40.3245L4.61958 46.8761C0.775717 52.8603 3.7102 60.9946 10.3956 62.887C27.8847 67.8377 46.332 67.8377 63.8208 62.887C70.5066 60.9946 73.4409 52.8603 69.5968 46.8761L65.3887 40.3245C63.6715 37.6508 62.7549 34.5098 62.7549 31.2964Z" stroke="black" stroke-width="4"/>
                <path d="M19.8359 66.5996C22.3251 73.2412 29.0413 77.9996 36.936 77.9996C44.8305 77.9996 51.547 73.2412 54.036 66.5996" stroke="black" stroke-width="4" stroke-linecap="round"/>
              </svg>
            </button>
            <button class="active-user">
              <svg width="30" height="30" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M20.8741 30.3333H51.0964M20.8741 45.4444H32.2075M70 36C70 54.7778 54.7778 70 36 70C28.3069 70 2.00272 70 2.00272 70C2.00272 70 7.893 55.8564 5.53566 51.1141C3.27255 46.5612 2 41.4294 2 36C2 17.2223 17.2223 2 36 2C54.7778 2 70 17.2223 70 36Z" stroke="black" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
            <button class="active-user">
              <svg width="30" height="30" viewBox="0 0 73 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M36.5 9.39716C29.6023 1.51784 18.0761 -0.917215 9.43372 6.29788C0.79127 13.513 -0.425468 25.5761 6.36149 34.1095C12.0044 41.2043 29.0818 56.1681 34.6788 61.0113C35.3048 61.5532 35.618 61.8241 35.9833 61.9304C36.3018 62.0232 36.6507 62.0232 36.9696 61.9304C37.3349 61.8241 37.6477 61.5532 38.2741 61.0113C43.8712 56.1681 60.9483 41.2043 66.5913 34.1095C73.3783 25.5761 72.3099 13.4371 63.5189 6.29788C54.7279 -0.841316 43.3977 1.51784 36.5 9.39716Z" stroke="#C14C4C" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
          </div>
          <div class="header__account account">
            <button id="account__avatar" class="account__avatar">
              <img src="" alt="">
            </button>
            <nav class="account__menu">
              <ul class="account__list">
                <li class="account__item">
                  <a href="#" class="account__link">Профиль</a>
                </li>
                <li class="account__item">
                  <a href="#" class="account__link">Еще пункт</a>
                </li>
                <li class="account__item">
                  <a href="#" class="account__link">Настройки</a>
                </li>
                <li class="account__item">
                  <a href="#" class="account__link exit">Выйти</a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </header>
  <main>

    <section class="checkout" aria-labelledby="checkout">
      <div class="checkout__inner container">
        <div class="checkout__wrapper">
          <h2 class="checkout__title">Проверить объявление</h2>
          <div class="checkout__body form-check">
            <input class="form-check__input" id="link" type="text" placeholder="Ссылка на объявление">
            <button class="form-check__btn" id="btn">Проверить</button>
          </div>
          <div class="res"  id="res"></div>
        </div>
      </div>
    </section>


    <style>
        h2 {
            text-align: center;
        }
        .checkout {
            padding: 0 20px;
            margin-top: 3rem;
        }
      .checkout__body {
          margin-top: 2rem;
          display: grid;
          grid-template-columns: 4fr 1fr;
      }
      .form-check__input {
          border: 0;
          height: 50px;
          padding: 0 15px;
          background: #e6e6e6;
          border-radius: 40px 0 0  40px;
      }
      .form-check__btn {
          background-color: #ffd11a;
          border-radius: 0 40px 40px 0;
      }
      .res {
          margin-top: 50px;
      }
      .res__data {
          padding: 0 20px 0 0;
          display: flex;
          flex-direction: column;
      }
      .res__body {
          padding: 40px;
          background: #f5f5f5;
          border-radius: 20px;
      }
        .res__answer {
            display: flex;
            justify-content: space-between;
        }
      .res__answer-body {
          background: #fff;
          width: 100%;
          height: 100%;
          border-radius: 20px;

      }
      h6 {
          margin: 0;
      }
      .res__data-item {
          margin-top: 30px;
      }
    </style>

  </main>
</div>





<!--<span class="res__address">Адрес: ${data.address}</span>-->

<!--<span class="res__prise">Район: ${data.district}</span>-->

<!--div.innerHTML = `Вот что мы нашли...<br>Адрес: ${data.address}<br>Цена: ${data.price} ₽<br>Заголовок: ${data.title}`;-->
<script>
    document.getElementById('btn').onclick = async () => {
        const url = document.getElementById('link').value.trim();
        const div = document.getElementById('res');
        div.textContent = 'Проверка...';
        try {
            const resp = await fetch('/check-domclick?url=' + encodeURIComponent(url));
            const data = await resp.json();
            if (data.valid) {
                div.innerHTML = `

                  <div class="res__body">
                    <div class="res__data">

                      <div class="res__answer">
                         <div class="res__images">
                              ${data.images?.map(url => `<img src="${url}" style="max-width: 200px; margin: 5px;">`).join('')}
                         </div>
                         <div class="res__answer-body">

                         </div>
                    </div>
                      <span class="res__title" style="font-size: 40px; color: #000000">${data.title}</span>
                      <div class="res__data-item">
                        <h6>Адрес</h6><span class="res__address">${data.address}</span>
                      </div>
                      <div class="res__data-item">
                        <h6>Цена</h6><span class="res__prise"> ${data.price} рублей</span>
                      </div>
                      <div class="res__data-item">
                        <h6>Описание</h6><span class="res__description">${data.description}</span>
                      </div>
                      <div class="res__data-list">
                        <div class="res__data-item">
                          <h6>Этаж</h6><span class="res__floar">${data.float}</span>
                        </div>
                        <div class="res__data-item">
                          <h6>Год постройки:</h6><span class="res__year">${data.year}</span>
                         </div>
                      </div>

<!--                      <span class="res__encumbrances">Обременения: ${data.encumbrances}</span>-->
                    </div>

                  </div>


                `;
            } else {
                div.innerHTML = `❌ Не прошёл проверку.<br>${data.reason || ''}`;
            }
        } catch (e) {
            div.textContent = 'Ошибка запроса';

        }
    };



</script>
</body>
</html>
